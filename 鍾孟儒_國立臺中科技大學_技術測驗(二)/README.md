# 個案管理系統（CMS）追蹤看板

## 專案簡介

這是一個基於現代網頁技術開發的個案管理追蹤系統，專為醫療照護機構設計。系統提供視覺化的個案管理介面，能自動標記需追蹤的個案，幫助照護人員有效管理與追蹤個案訪視進度。

## 核心功能

### 1. 個案資料管理
- **新增個案**：完整的表單欄位，包含姓名、病歷號、管理類別、風險等級、訪視日期、初評摘要
- **編輯個案**：可修改現有個案資料
- **刪除個案**：移除不再需要追蹤的個案
- **自訂類別**：除了預設類別外，可自訂管理類別

### 2. 智慧追蹤系統
- **自動判定待追蹤個案**：系統自動計算距離最近訪視日的天數
- **7 天追蹤閾值**：超過 7 天未訪視的個案會被標記為「待追蹤」
- **即時統計更新**：統計數據隨著資料變更即時更新

### 3. 視覺化呈現
- **統計卡片**：
  - 總個案數：顯示系統中所有個案總數
  - 高風險個案：標示需重點關注的高風險個案數量
  - 待追蹤人數：自動統計超過 7 天未訪視的個案數

- **風險等級標示**：
  - 🔴 **高風險（High）**：需密集追蹤的個案
  - 🟡 **中風險（Medium）**：需定期追蹤的個案
  - 🟢 **低風險（Low）**：穩定狀態的個案

### 4. 搜尋與篩選
- **關鍵字搜尋**：支援依姓名或病歷號快速搜尋
- **風險等級篩選**：可依高/中/低風險等級過濾顯示
- **即時過濾**：輸入即時更新搜尋結果

## 技術架構

採用模組化設計，將功能拆分為獨立模組，提升程式碼可維護性：

```
├── index.html                    # 主頁面結構
├── styles.css                    # 樣式設計
└── js/
    ├── config.js                 # 系統設定常數（風險等級、追蹤閾值）
    ├── utils.js                  # 通用工具函數（日期格式化等）
    ├── state.js                  # 全域狀態管理
    ├── validators.js             # 表單驗證邏輯
    ├── business-logic.js         # 業務邏輯（過濾、統計計算）
    ├── data-manager.js           # 資料 CRUD 操作
    ├── dom-cache.js              # DOM 元素快取
    ├── renderer.js               # UI 渲染邏輯
    ├── event-handlers.js         # 事件處理器
    └── app.js                    # 應用程式初始化
```

### 分層架構說明

```
┌──────────────────────────────────────┐
│          UI Layer (index.html)        │  ← 使用者介面
├──────────────────────────────────────┤
│      Event Handlers & Renderer        │  ← 事件處理與畫面渲染
├──────────────────────────────────────┤
│         Data Manager & State          │  ← 資料管理與狀態
├──────────────────────────────────────┤
│    Business Logic & Validators        │  ← 業務邏輯與驗證
├──────────────────────────────────────┤
│         Utils & Config                │  ← 工具與設定
└──────────────────────────────────────┘
```

## 技術棧

- **前端框架**：純 JavaScript（Vanilla JS）
- **UI 框架**：Bootstrap 5.3.0
- **圖示庫**：Bootstrap Icons 1.10.0
- **設計模式**：模組化設計、關注點分離（Separation of Concerns）
- **資料結構**：物件導向設計，使用 JSON 格式儲存個案資料

## 預設測試資料

系統內建 6 筆測試個案資料：

| 姓名 | 病歷號 | 管理類別 | 風險等級 | 最近訪視日 | 初評摘要 |
|------|--------|----------|----------|-----------|----------|
| 王小明 | A123456 | 慢性病管理 | 高風險 | 2025-12-25 | 糖尿病併發症，需密集追蹤 |
| 李美華 | B234567 | 復健追蹤 | 中風險 | 2025-12-28 | 中風後復健，進展良好 |
| 張志偉 | C345678 | 心理諮商 | 高風險 | 2025-12-20 | 憂鬱症追蹤，需加強關懷 |
| 陳淑芬 | D456789 | 營養諮詢 | 低風險 | 2025-12-30 | 體重控制計畫，配合度佳 |
| 林俊傑 | E567890 | 慢性病管理 | 中風險 | 2025-12-22 | 高血壓控制中，血壓穩定 |
| 黃雅婷 | F678901 | 用藥諮詢 | 低風險 | 2025-12-27 | 藥物調整後反應良好 |

## 啟動方式

### 方法一：使用 VS Code Live Server（推薦）

1. 安裝 VS Code 插件：**Live Server**
2. 在 VS Code 中打開 `index.html`
3. 右鍵選擇「Open with Live Server」
4. 瀏覽器會自動開啟系統

### 方法二：直接開啟 HTML 檔案

1. 直接雙擊 `index.html` 檔案
2. 瀏覽器會開啟系統（部分功能可能受限）

### 方法三：使用本地伺服器

```bash
# 使用 Python 啟動簡易伺服器
python -m http.server 8000

# 使用 Node.js http-server
npx http-server

# 然後在瀏覽器開啟 http://localhost:8000
```

## 使用說明

### 新增個案
1. 在「新增個案」區塊填寫表單
2. 必填欄位：姓名、病歷號、管理類別、風險等級、初評摘要
3. 最近訪視日可選填，空白則自動填入今天
4. 點擊「新增個案」按鈕完成新增

### 編輯個案
1. 在個案列表中找到要編輯的個案
2. 點擊「鉛筆」圖示按鈕
3. 表單會自動填入該個案資料
4. 修改完成後點擊「更新個案」按鈕

### 刪除個案
1. 在個案列表中找到要刪除的個案
2. 點擊「垃圾桶」圖示按鈕
3. 系統會要求確認刪除
4. 確認後該個案將被移除

### 搜尋與篩選
- **搜尋**：在搜尋框輸入姓名或病歷號
- **篩選**：使用下拉選單選擇風險等級
- 可同時使用搜尋與篩選功能

## 待追蹤判定邏輯

系統使用以下邏輯判斷個案是否需要追蹤：

```javascript
今天日期 - 最近訪視日 > 7 天 ⇒ 標記為「待追蹤」
```

### 計算範例
- 今天：2026-01-07
- 最近訪視日：2025-12-30
- 天數差：8 天
- 判定：**需要追蹤**（8 > 7）

## 程式特色

1. **響應式設計**：支援桌面、平板、手機等多種裝置
2. **即時更新**：所有操作立即反映在統計數據與列表中
3. **友善提示**：操作成功或失敗都有清楚的視覺化提示
4. **資料驗證**：完整的表單驗證，防止錯誤資料輸入
5. **模組化架構**：程式碼結構清晰，易於維護與擴充
6. **無需後端**：純前端實作，可直接部署為靜態網站
7. **Bootstrap 設計**：使用業界標準 UI 框架，介面專業美觀

## 瀏覽器相容性

- Chrome（推薦）
- Firefox
- Edge
- Safari

建議使用最新版本瀏覽器以獲得最佳體驗。

## 未來擴充建議

- 資料持久化：整合 LocalStorage 或後端資料庫
- 匯出功能：支援匯出 Excel/PDF 報表
- 圖表統計：新增趨勢圖表與統計分析
- 提醒功能：自動提醒需追蹤的個案
- 多使用者權限管理
